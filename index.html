<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Self Transfer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    form {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 420px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }
    input, select, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    hr {
      margin: 15px 0;
    }
    button {
      margin-top: 15px;
      background: #007bff;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>

<body>

<form id="transferForm">
  <h2>Self Transfer</h2>

  <!-- Date -->
  <label>Date</label>
  <input type="date" id="date" required>

  <!-- Narration -->
  <label>Narration</label>
  <input type="text" id="narration" placeholder="Description" required>

  <hr>

  <!-- FROM -->
  <h3>From</h3>

  <label>Transaction Type</label>
  <select id="from_trtype" required>
    <option value="">Select</option>
    <option value="cash">Cash</option>
    <option value="upi">UPI</option>
    <option value="net">Net Banking</option>
    <option value="debit">Debit</option>
    <option value="credit">Credit</option>
  </select>

  <label id="fromLabel" style="display:none;">From Account</label>
  <select id="from_account" style="display:none;"></select>

  <hr>

  <!-- TO -->
  <h3>To</h3>

  <label>Transaction Type</label>
  <select id="to_trtype" required>
    <option value="">Select</option>
    <option value="cash">Cash</option>
    <option value="upi">UPI</option>
    <option value="net">Net Banking</option>
    <option value="debit">Debit</option>
    <option value="credit">Credit</option>
  </select>

  <label id="toLabel" style="display:none;">To Account</label>
  <select id="to_account" style="display:none;"></select>

  <hr>

  <!-- Amount -->
  <label>Amount</label>
  <input type="number" id="amount" required>

  <button type="submit">Transfer</button>
</form>

<script>
  const bankAccounts = [
    "Axis", "HDFC Old", "HDFC New", "ICICI",
    "IndusInd", "Kotak", "RBL", "SBI"
  ];

  const creditCards = [
    "Axis Flipkart", "Axis MyZone", "Axis Neo",
    "HDFC Millennia", "ICICI Amazon",
    "Indusind Legend", "SBI BPCL"
  ];

  function setupDropdown(trTypeId, accountId, labelId) {
    const  narration: document.getElementById("narration").valuue;
    const trType = document.getElementById(trTypeId);
    const account = document.getElementById(accountId);
    const label = document.getElementById(labelId);

    trType.addEventListener("change", () => {
      account.innerHTML = "";

      if (trType.value === "cash") {
        account.style.display = "none";
        label.style.display = "none";
        account.required = false;
        return;
      }

      account.style.display = "block";
      label.style.display = "block";
      account.required = true;

      let options = [];
      if (["upi", "net", "debit"].includes(trType.value)) options = bankAccounts;
      if (trType.value === "credit") options = creditCards;

      const def = document.createElement("option");
      def.value = "";
      def.text = "Select";
      account.appendChild(def);

      options.forEach(v => {
        const opt = document.createElement("option");
        opt.value = v;
        opt.text = v;
        account.appendChild(opt);
      });
    });
  }

  setupDropdown("from_trtype", "from_account", "fromLabel");
  setupDropdown("to_trtype", "to_account", "toLabel");

  document.getElementById("transferForm").addEventListener("submit", async e => {
    e.preventDefault();

    const data = {
      date: document.getElementById("date").value,
      from: {
        trtype: document.getElementById("from_trtype").value,
        account:
          document.getElementById("from_trtype").value === "cash"
            ? "Cash"
            : document.getElementById("from_account").value
      },
      to: {
        trtype: document.getElementById("to_trtype").value,
        account:
          document.getElementById("to_trtype").value === "cash"
            ? "Cash"
            : document.getElementById("to_account").value
      },
      amount: document.getElementById("amount").value
    };

    console.log("Submitting:", data);

    try {
      await fetch("https://hook.eu1.make.com/v7ffxo6nse2qjsua3rpsk47dq8fdnxci", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      alert("✅ Transfer recorded");
      document.getElementById("transferForm").reset();
      document.getElementById("from_account").style.display = "none";
      document.getElementById("to_account").style.display = "none";
      document.getElementById("fromLabel").style.display = "none";
      document.getElementById("toLabel").style.display = "none";

    } catch (err) {
      alert("❌ Error");
      console.error(err);
    }
  });
</script>

</body>
</html>



